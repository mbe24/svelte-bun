import{a as _,f as S}from"../chunks/ocXDWICz.js";import{o as O,A as y,v as s,t as T,x as l,y as t,z as r,B as q,u as a,w as p}from"../chunks/CotjxpfT.js";import{e as B,s as w}from"../chunks/N6AJ7VlO.js";import{i as C}from"../chunks/ClDK4hQ3.js";import{b as k,r as L}from"../chunks/C0bMonJD.js";import{g as J}from"../chunks/Txi4htyY.js";var R=S('<div class="error svelte-1x05zx6"> </div>'),U=S(`<div class="container svelte-1x05zx6"><div class="form-card svelte-1x05zx6"><h1 class="svelte-1x05zx6">Login</h1> <p class="subtitle svelte-1x05zx6">Sign in to your account</p> <form><div class="form-group svelte-1x05zx6"><label for="username" class="svelte-1x05zx6">Username</label> <input id="username" type="text" placeholder="Enter username" class="svelte-1x05zx6"/></div> <div class="form-group svelte-1x05zx6"><label for="password" class="svelte-1x05zx6">Password</label> <input id="password" type="password" placeholder="Enter password" class="svelte-1x05zx6"/></div> <!> <button type="submit" class="button-primary svelte-1x05zx6"> </button></form> <p class="link-text svelte-1x05zx6">Don't have an account? <a href="/register" class="svelte-1x05zx6">Register here</a></p></div></div>`);function Q(P,j){O(j,!0);let v=p(""),d=p(""),o=p(""),i=p(!1);async function A(){if(a(o,""),!s(v)||!s(d)){a(o,"All fields are required");return}a(i,!0);try{const e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s(v),password:s(d)})}),n=await e.json();e.ok?J("/counter"):a(o,n.error||"Login failed",!0)}catch{a(o,"Network error. Please try again.")}finally{a(i,!1)}}var u=U(),h=t(u),c=l(t(h),4),x=t(c),f=l(t(x),2);L(f),r(x);var m=l(x,2),b=l(t(m),2);L(b),r(m);var z=l(m,2);{var D=e=>{var n=R(),N=t(n,!0);r(n),y(()=>w(N,s(o))),_(e,n)};C(z,e=>{s(o)&&e(D)})}var g=l(z,2),E=t(g,!0);r(g),r(c),q(2),r(h),r(u),y(()=>{f.disabled=s(i),b.disabled=s(i),g.disabled=s(i),w(E,s(i)?"Logging in...":"Login")}),B("submit",c,e=>{e.preventDefault(),A()}),k(f,()=>s(v),e=>a(v,e)),k(b,()=>s(d),e=>a(d,e)),_(P,u),T()}export{Q as component};
