import{a as b,f as m}from"../chunks/ocXDWICz.js";import{o as A}from"../chunks/P3sBFngi.js";import{o as F,t as P,x as i,u as n,y as r,z as s,v as l,w as f,A as z}from"../chunks/CotjxpfT.js";import{d as J,s as M}from"../chunks/N6AJ7VlO.js";import{i as N}from"../chunks/ClDK4hQ3.js";import{g as p}from"../chunks/Txi4htyY.js";var q=m('<div class="loading svelte-1lebb1n">Loading...</div>'),B=m('<div class="counter-card svelte-1lebb1n"><div class="counter-display svelte-1lebb1n"> </div> <div class="button-group svelte-1lebb1n"><button class="counter-button decrement svelte-1lebb1n">âˆ’</button> <button class="counter-button increment svelte-1lebb1n">+</button></div></div>'),D=m('<div class="container svelte-1lebb1n"><div class="header svelte-1lebb1n"><h1 class="svelte-1lebb1n">Counter App</h1> <button class="logout-button svelte-1lebb1n">Logout</button></div> <!></div>');function R(k,w){F(w,!0);let c=f(0),_=f(!0),o=f(!1);A(async()=>{await x()});async function x(){try{const t=await fetch("/api/counter");if(t.ok){const e=await t.json();n(c,e.value,!0)}else p("/login")}catch(t){console.error("Failed to load counter:",t)}finally{n(_,!1)}}async function g(t){if(!l(o)){n(o,!0);try{const e=await fetch("/api/counter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:t})});if(e.ok){const a=await e.json();n(c,a.value,!0)}else p("/login")}catch(e){console.error("Failed to update counter:",e)}finally{n(o,!1)}}}async function C(){try{await fetch("/api/auth/logout",{method:"POST"}),p("/")}catch(t){console.error("Logout failed:",t)}}var u=D(),d=r(u),L=i(r(d),2);L.__click=C,s(d);var j=i(d,2);{var O=t=>{var e=q();b(t,e)},S=t=>{var e=B(),a=r(e),T=r(a,!0);s(a);var h=i(a,2),v=r(h);v.__click=()=>g("decrement");var y=i(v,2);y.__click=()=>g("increment"),s(h),s(e),z(()=>{M(T,l(c)),v.disabled=l(o),y.disabled=l(o)}),b(t,e)};N(j,t=>{l(_)?t(O):t(S,!1)})}s(u),b(k,u),P()}J(["click"]);export{R as component};
